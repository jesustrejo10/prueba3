--2
--drop table TESORERO;
--3
--drop table CON_JUN;
--9
--alter table CHEQUE ADD (TDP1_NUMERO_CHEQUE VARCHAR2(100) NOT NULL);
--10
--alter table TARJETA ADD (TDP2_TIPO_TARJETA VARCHAR2(10) NOT NULL);
--10.1
--alter table TARJETA ADD CONSTRAINT CH_TIPO_TARJETA CHECK(TDP2_TIPO_TARJETA IN ('DEBITO','CREDITO'));
--11
--DROP TABLE FON_TDP;
--12
--ALTER TABLE LIBRO ADD (LIB_TEXTO VARCHAR2(200) );

--alter table APT_DET add (AD_PRECIO FLOAT);
UPDATE APT_DET SET AD_PRECIO = 10000000; 

--CREATE SEQUENCE sq_pk_apt INCREMENT BY 1 START WITH 1;
--CREATE SEQUENCE SQ_PK_EDIFICIO INCREMENT BY 1 START WITH 1;
--CREATE SEQUENCE SQ_PK_AREA_DET INCREMENT BY 1 START WITH 1;
--ALTER TABLE APT_DET ADD (AD_VENTA VARCHAR2(20) NOT NULL);
--ALTER TABLE APT_DET ADD CONSTRAINT CK_AD_VENTA CHECK (AD_VENTA IN ----('SI','NO'));
--alter table APARTAMENTO drop column APT_PISO;
--ALTER TABLE APT_DET ADD (AD_PISO VARCHAR2(100) NOT NULL);
--CREATE SEQUENCE SQ_PK_APT_DET INCREMENT BY 1 START WITH 1;
--CREATE SEQUENCE SQ_PK_OFICINA INCREMENT BY 1 START WITH 1;
--alter TABLE APT_DET ADD ( AD_PRECIO FLOAT);
--drop table FON_TDP2;
--drop table PAG_TDP;
ALTER TABLE PAGO ADD (PAG_FK_FONDO NUMBER);
ALTER TABLE PAGO ADD CONSTRAINT FK_PAGO_FONDO FOREIGN KEY (PAG_FK_FONDO) REFERENCES FONDO ON DELETE CASCADE;
ALTER TABLE PAGO ADD (PAG_FK_CHEQUE NUMBER);
ALTER TABLE PAGO ADD CONSTRAINT FK_PAGO_CHEQUE FOREIGN KEY (PAG_FK_CHEQUE) REFERENCES CHEQUE ON DELETE CASCADE;
ALTER TABLE PAGO ADD (PAG_FK_TARJETA NUMBER);
ALTER TABLE PAGO ADD CONSTRAINT FK_PAGO_TARJETA FOREIGN KEY (PAG_FK_TARJETA) REFERENCES TARJETA ON DELETE CASCADE;
ALTER TABLE PAGO ADD (PAG_FK_PROPIETARIO NUMBER);
ALTER TABLE PAGO ADD CONSTRAINT FK_PAGO_PROPIETARIO FOREIGN KEY (PAG_FK_PROPIETARIO) REFERENCES PROPIETARIO ON DELETE CASCADE;
ALTER TABLE UNIDADTRIBUTARIA ADD (UNI_VIGENTE VARCHAR2(2) NOT NULL);
ALTER TABLE UNIDADTRIBUTARIA ADD CONSTRAINT CK_VIGENTE_UT CHECK (UNI_VIGENTE IN ('SI','NO'));

ALTER TABLE TRABAJO ADD (TRA_REALIZADO VARCHAR2(2) NOT NULL);
ALTER TABLE TRABAJO ADD CONSTRAINT CK_TRABAJO_REALIZADO CHECK (TRA_REALIZADO IN ('SI','NO'));
ALTER TABLE TRABAJO ADD (TRA_F_PROPUESTO DATE NOT NULL);
ALTER TABLE TRABAJO ADD (TRA_F_REALIZADO DATE );

ALTER TABLE LIB_MIEM ADD (LM_FECHA DATE NOT NULL);
ALTER TABLE LIB_MIEM ADD (LM_DESCRIPCION VARCHAR2(200));

CREATE TABLE LIB_EMP (
LE_CLAVE NUMBER,
LE_FK_LIBRO NUMBER,
LE_FK_EMP_OFI NUMBER,
LE_FECHA DATE NOT NULL,
LE_DESCRIPCION VARCHAR2(200),
CONSTRAINT PK_LIB_EMP PRIMARY KEY (LE_CLAVE),
CONSTRAINT FK_LE_LIBRO FOREIGN KEY (LE_FK_LIBRO) REFERENCES LIBRO ON DELETE CASCADE,
CONSTRAINT FK_LE_EMP_OFI FOREIGN KEY (LE_FK_EMP_OFI) REFERENCES EMP_OFI ON DELETE CASCADE);
CREATE TABLE LLAMADO (
LLA_CLAVE NUMBER,
LLA_NUMERO NUMBER NOT NULL,
LLA_QUORUM_MINIMO NUMBER,
LLA_PORCENTAJEAPROBACION FLOAT,
LLA_FK_CONTRATO NUMBER,
CONSTRAINT PK_LLAMADO PRIMARY KEY (LLA_CLAVE),
CONSTRAINT FK_LLAMADO_CONTRATO FOREIGN KEY (LLA_FK_CONTRATO) REFERENCES CONTRATO ON DELETE CASCADE
);
ALTER TABLE CONTRATO DROP COLUMN CONT_LLAMADOS; 
alter table VENTA_APT add (VAPT_FECHA DATE NOT NULL);
alter table CONTRATO DROP column CONT_QUORUM_MINIMO;
create sequence SQ_PK_LLAMADO increment by 1 start with 1;
create sequence SQ_PK_MIEMBROS increment by 1 start with 1;
alter table RECLAMO drop constraint FK_RECLAMO_PROPIETARIO;
alter table RECLAMO drop COLUMN REC_FK_PROPIETARIO;
alter table RECLAMO ADD (REC_FK_APT_DET NUMBER NOT NULL);
alter table RECLAMO ADD CONSTRAINT FK_RECLAMO_APT_DET FOREIGN KEY (REC_FK_APT_DET) REFERENCES APT_DET ON DELETE CASCADE;

alter table TRABAJO DROP CONSTRAINT CH_TRABAJO_TIPO;
ALTER TABLE TRABAJO ADD CONSTRAINT CHECK_TRABAJO_TIPO CHECK (TRA_TIPO IN ('MEJORA','REPARACION','MANTENIMIENTO','ANUNCIO','ASAMBLEA','SERVICIOBASICO'));
alter table PAGO ADD (PAG_FK_FONDO_DETALLADO NUMBER);
alter table PAGO ADD CONSTRAINT FK_PAGO_FONDO_DET FOREIGN KEY(PAG_FK_FONDO_DETALLADO) REFERENCES CONT_FOND ON DELETE CASCADE;
ALTER TABLE PAGO DROP COLUMN PAG_FK_FONDO;
ALTER TABLE FONDO DROP COLUMN FON_MONTO;

ALTER TABLE FONDO DROP CONSTRAINT CK_TIPO_FONDO;
ALTER TABLE FONDO ADD CONSTRAINT CK_TIPO_FONDO CHECK (FON_TIPO IN ('CAJACHICA','RESERVA','MEJORA','TRABAJO'));
create sequence sq_pk_fondo_Contrato increment by 1 start with 1;
alter table TRABAJO DROP CONSTRAINT CHECK_TRABAJO_TIPO;
ALTER TABLE TRABAJO ADD CONSTRAINT CHECK_TRABAJO_TIPO CHECK (TRA_TIPO IN ('MEJORA','REPARACION','MANTENIMIENTO','ANUNCIO','ASAMBLEA','SERVICIOBASICO','FONDO'));
create SEQUENCE SQ_PK_CONTRATO INCREMENT BY 1 START WITH 1;

ALTER TABLE LIBRO ADD (LIB_FK_CONTRATO NUMBER NOT NULL);
ALTER TABLE LIBRO ADD CONSTRAINT FK_LIB_CONTRATO FOREIGN KEY (LIB_FK_CONTRATO) REFERENCES CONTRATO ON DELETE CASCADE;

alter table TRABAJO add (TRA_FK_CONT_FOND NUMBER);
alter table TRABAJO add CONSTRAINT FK_TRABAJO_CONT_FOND FOREIGN KEY (TRA_FK_CONT_FOND) REFERENCES CONT_FOND ON DELETE CASCADE;

alter table LIBRO drop COLUMN LIB_TEXTO;
CREATE SEQUENCE SQ_PK_LIBRO INCREMENT BY 1 START WITH 1;

ALTER TABLE TRABAJO DROP COLUMN TRA_FK_LIBRO;

CREATE SEQUENCE SQ_PK_AD_TRA INCREMENT BY 1 START WITH 1;
CREATE SEQUENCE SQ_PK_CUENTA INCREMENT BY 1 START WITH 1;
CREATE SEQUENCE SQ_PK_RECIBOMENSUAL INCREMENT BY 1 START WITH 1;
CREATE SEQUENCE SQ_PK_CONT_FOND INCREMENT BY 1 START WITH 1;

ALTER TABLE CONT_FOND ADD CONSTRAINT FK_CF_FONDO FOREIGN KEY (CF_FK_FONDO) REFERENCES FONDO ON DELETE CASCADE;
ALTER TABLE CONT_FOND ADD CONSTRAINT FK_CF_CONTRATO FOREIGN KEY (CF_FK_CONTRATO) REFERENCES CONTRATO ON DELETE CASCADE;
create sequence SQ_PK_AVISOCOBRO INCREMENT by 1 START with 1;
alter table AVISOCOBRO DROP COLUMN AVI_FK_EDIFICIO;
CREATE SEQUENCE SQ_RECIBO_MENSUAL START WITH 1;
CREATE SEQUENCE SQ_PK_CITAASAMBLEA START WITH 1 INCREMENT BY 1;

